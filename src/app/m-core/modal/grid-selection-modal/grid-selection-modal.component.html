<ion-header collapse="fade" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start" (click)="dismissModal([])"><ion-icon name="arrow-back-outline"></ion-icon></ion-buttons>
      <ion-searchbar></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content class="pages">
    <ion-segment class="grid_selection_tab" ngDefaultControl [(ngModel)]="selectedTab" color="appcolor" (ionChange)="segmentChanged($event)">
        <ion-segment-button value="new" >
            <ion-label>New</ion-label>
        </ion-segment-button>
        <ion-segment-button value="added">
            <ion-label>Added</ion-label>
        </ion-segment-button>
    </ion-segment>

    <div *ngIf="selectedTab == 'new'">
        <div class="app-grid_selection ion-margin-start ion-margin-end" *ngFor="let data of gridData; let i = index">
            <ion-item class=""  lines="none">
                <ion-buttons slot="start" >
                <ion-checkbox checked="true" color="appcolor" class="left icon" name="" (click)="$event.stopPropagation()" (ionChange)="$event ? toggle(data, $event, i) : null" [checked]="data.selected" ></ion-checkbox>
                </ion-buttons>
                <ion-buttons slot="end">
                <ion-img [src]="expandicon" (click)="addremoveparticipant(data)"></ion-img>
                </ion-buttons>
            </ion-item>
            <ion-row>
                <ion-col size="6" *ngFor="let column of listOfGridFieldName">
                    <div *ngIf="!column.editable">
                        <ion-item lines="none" class="">
                            <ion-label slot="start" class="grid-label">{{ column.label }}
                                <span class="colon-seperator">:</span>
                            </ion-label>
                            <ion-label  class="content" [innerHtml]="getValueForGrid(column,data)"></ion-label>
                        </ion-item>
                    </div>
                    <div *ngIf="column.editable">
                        <ion-item lines="none" class="">
                            <ion-label slot="start" class="grid-label">{{ column.label }}
                                <span class="colon-seperator">:</span>
                            </ion-label>
                            <div *ngIf="column.type.toLowerCase() == 'text'">
                                <input  type="text" class="form-control form-control-sm d-inline mr-2" (keyup)="calculateNetAmount(data,column, i)" [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)" >
                            </div>
                            <div *ngIf="column.type.toLowerCase() == 'number'">
                            <input  type="number" style="min-width: 50px;" class="form-control form-control-sm d-inline mr-2" (keyup)="calculateNetAmount(data,column, i)"  [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)">
                            </div>
                        </ion-item>
                    </div>            
                </ion-col>        
            </ion-row>
        </div>        
    </div>

    <div *ngIf="selectedTab == 'added'">
        <div class="app-grid_selection ion-margin-start ion-margin-end" *ngFor="let data of getSelectedData(); let i = index">
            <ion-item class=""  lines="none">
                <ion-buttons slot="start" >
                <ion-checkbox checked="true" color="appcolor" class="left icon" name="" (click)="$event.stopPropagation()" (ionChange)="$event ? toggle(data, $event, i) : null" [checked]="data.selected" ></ion-checkbox>
                </ion-buttons>
                <ion-buttons slot="end">
                <ion-img [src]="expandicon" (click)="addremoveparticipant(data)"></ion-img>
                </ion-buttons>
            </ion-item>
            <ion-row >
                <ion-col size="6" *ngFor="let column of listOfGridFieldName">
                    <div *ngIf="!column.editable">
                        <ion-item lines="none" class="">
                            <ion-label slot="start" class="grid-label">{{ column.label }}
                                <span class="colon-seperator">:</span>
                            </ion-label>
                            <ion-label  class="content" [innerHtml]="getValueForGrid(column,data)"></ion-label>
                        </ion-item>
                    </div>
                    <div *ngIf="column.editable">
                        <ion-item lines="none" class="">
                            <ion-label slot="start" class="grid-label">{{ column.label }}
                                <span class="colon-seperator">:</span>
                            </ion-label>
                            <div *ngIf="column.type.toLowerCase() == 'text'">
                                <input  type="text" class="form-control form-control-sm d-inline mr-2" (keyup)="calculateNetAmount(data,column, i)" [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)" >
                            </div>
                            <div *ngIf="column.type.toLowerCase() == 'number'">
                            <input  type="number" style="min-width: 50px;" class="form-control form-control-sm d-inline mr-2" (keyup)="calculateNetAmount(data,column, i)"  [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)">
                            </div>
                        </ion-item>
                    </div>            
                </ion-col>        
            </ion-row>
        </div>         
    </div>
    <div class="button_position">
        <div class="flex_grid">
        <ion-button type="button" color="appcolor" [disabled]="checkValidator()"  (click)="selectGridData()" expand="full" >Add</ion-button>
        <ion-button type="button" color="appcolor" [disabled]="checkValidator()" (click)="dismissModal([])" expand="full" >Cancel</ion-button>
        </div>
    </div>
  
   
</ion-content>