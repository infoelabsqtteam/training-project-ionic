<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" (click)="closeModal()"><ion-icon name="arrow-back-outline" slot="icon-only"></ion-icon></ion-buttons>
    <ion-title class="ion-no-padding ion-text-capitalize">{{gridSelctionTitle}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="pages ion-padding-horizontal">
  
  <ion-card class="contactdetails app-grid_selection fixed_button detail_grid" *ngIf="cardType == 'demo1'">
    <div class="" *ngFor="let column of columnList; let i = index" [ngClass]="column.display ? 'd-block':'d-none'">
      <div *ngIf="!column.editable" class="enquerylist ">
        <span [title]="column.label" class="detail-grid">{{column.label}}<ion-text>&nbsp;:&nbsp;</ion-text></span>
        <strong [innerHtml]="getValueForGrid(column,data)"></strong>
      </div>
      <div *ngIf="column.editable" class="enquerylist">
        <span [title]="column.label" class="detail-grid">{{column.label}} <ion-text color="danger" *ngIf="column.is_mandatory">*</ion-text><ion-text>&nbsp;:&nbsp;</ion-text></span>        
        <span *ngIf="column.type.toLowerCase() == 'text'" class="editable-input-wrapper">
            <input  type="text" class="form-control form-control-sm d-inline mr-2" (keyup)="calculateNetAmount(data,column, i)" [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)" [readonly]="readonly">
        </span>
        <span *ngIf="column.type.toLowerCase() == 'textarea'" class="editable-input-wrapper">
          <input type="text" class="form-control form-control-sm d-inline mr-2" [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)" [readonly]="readonly">
        </span>
        <span *ngIf="column.type.toLowerCase() == 'number'" class="editable-input-wrapper">
          <input  type="number" class="form-control form-control-sm d-inline mr-2" (keyup)="calculateNetAmount(data,column, i)"  [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)" [readonly]="readonly">
        </span>
        <span *ngIf="column.type.toLowerCase() == 'boolean'" class="editable-input-wrapper" >
            <ion-checkbox [(ngModel)]="data[column.field_name]" [ngclass]="column.field_class" class="ion-margin-end" [disabled]="isDisable(column,data)" [disabled]="readonly"></ion-checkbox>            
        </span>        
        <span *ngIf="column.type.toLowerCase() == 'dropdown'" class="editable-input-wrapper">
            <ion-select [interfaceOptions]="customAlertOptions" interface="{{ionSelectInterface}}" [selectedText]="data[column.field_name]" [(ngModel)]="data[column.field_name]" [disabled]="isDisable(column,data)" [readonly]="readonly" class="ion-border_bottom ion-padding-end" (ionCancel)="clearDropdownField($event, column)" cancel-text="Clear" (ionDismiss)="$event.stopPropagation()" (ionFocus)="selectionFocus(column)">
              <ion-select-option *ngFor="let staticValue of staticData[column.ddn_field]" [value]="staticValue" [innerHtml]="getddnDisplayVal(staticValue)"></ion-select-option>
            </ion-select>
        </span>        
        <span *ngIf="column.type.toLowerCase() == 'userinput_chips'" class="editable-input-wrapper userInputChips">         
          <ion-chip  *ngFor="let item of custmizedFormValueData(data,column); let i = index" [disabled]="isDisable(column,data)" [disabled]="readonly">
            <ion-label>{{getddnDisplayVal(item)}}</ion-label>
            <ion-icon name="close-outline" (click)="removeItem(data,column,i)"></ion-icon>
          </ion-chip>
          <ng-select [bindLabel]="'column.name'" [(ngModel)]="userInputChipsData" notFoundText="No records found" (keyup)="searchTypeaheadData(column,data,$event)" (change)="searchTypeaheadData(column,data,$event)" (blur)="setValue(userInputChipsData,column,data)" (keyup.enter)="setValue($event,column,data)"  [disabled]="isDisable(column,data)" [readonly]="readonly" enterkeyhint="done">
            <ng-option *ngFor="let option of typeAheadData" [value]="option" [innerHtml]="getddnDisplayVal(option)"></ng-option>
          </ng-select>
        </span>
        <span *ngIf="column.type.toLowerCase() == 'chips'" class="editable-input-wrapper chips">         
          <ion-chip  *ngFor="let item of custmizedFormValueData(data,column); let i = index" [disabled]="isDisable(column,data)" [disabled]="readonly">
            <ion-label>{{getddnDisplayVal(item)}}</ion-label>
            <ion-icon name="close-outline" (click)="removeItem(data,column,i)"></ion-icon>
          </ion-chip>
          <ng-select [bindLabel]="'column.name'" [(ngModel)]="chipsData" notFoundText="No records found" (keyup)="searchTypeaheadData(column,data,$event)" (change)="setValue($event,column,data)" [disabled]="isDisable(column,data)" [readonly]="readonly" enterkeyhint="done">
            <ng-option *ngFor="let option of typeAheadData" [value]="option" [innerHtml]="getddnDisplayVal(option)"></ng-option>
          </ng-select>          
        </span>
      </div>
    </div>
    <ion-card-content *ngIf="columnList.length == 0">
      <ion-text>Grid Columns are not available In This Field.</ion-text>
      <ion-button type="button" color="appcolor" outline="true" size="small" expand="block" (click)="closeModal()">Go Back</ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>
<ion-footer> 
  <div  class="inlineFormGridSelectionButton">
      <ion-row class="">
        <ion-col>
          <ion-button *ngIf="(gridselectionverticalbutton && grid_row_selection) || (!gridselectionverticalbutton)" type="button" color="appcolor" [disabled]="readonly"  (click)="select()" size="small" expand="block" >{{formInfo.updateMode == true ? 'Update' : 'Add'}}</ion-button>
          <ion-button *ngIf="(gridselectionverticalbutton && !grid_row_selection)" type="button" [disabled]="" color="appcolor" outline="true" size="small" expand="block"  (click)="selectGridData()" >{{ fieldButtonLabel(field)}}</ion-button >
        </ion-col>
        <ion-col>
          <ion-button *ngIf="(gridselectionverticalbutton && grid_row_selection)" type="button" color="appcolor" [disabled]="readonly" (click)="remove()" size="small" expand="block" >Remove</ion-button>
          <ion-button *ngIf="(gridselectionverticalbutton && !grid_row_selection) || (!gridselectionverticalbutton)" type="button" color="appcolor" [disabled]="" (click)="closeModal()" size="small" expand="block" >Cancel</ion-button>
        </ion-col>
      </ion-row>
      <!-- <div *ngIf="!grid_row_selection">
        <ion-button  type="button" [disabled]="checkValidator()" color="appcolor" outline="true" size="small" expand="block"  (click)="selectGridData()">{{ fieldButtonLabel(field)}}</ion-button >
        <ion-button type="button" color="appcolor" outline="true" size="small" expand="block" (click)="closeModal()">Close</ion-button>
      </div> -->
  </div>
</ion-footer>